
@{
    ViewBag.Title = "Conversation";
    Layout = "~/Areas/Home/Views/Shared/_Layout.cshtml";
    
}

<!--Add reference to the JQuery file-->

<!-- Add reference to the minified version of the SignarR client library -->
<script src="~/Scripts/jquery.signalR-2.2.0.min.js"></script>
<!-- Add reference to the auto-generated proxy file -->
<script src="~/signalr/hubs"></script>
<script type="text/javascript">
    $(document).ready(function () {
        
        var _name = window.prompt("Please Enter your name");
        $("#spnName").text(_name);
        $('#txtMsg').val('');

        //Get proxy instance using the auto-generated proxy class
        var chatProxy = $.connection.signalRChatHub;
        // Bind the btnClick event when connection to the hub is started
        $.connection.hub.start().done(function () {
            $("#btnSend").click(function () {
                // Send Message to the Hub using the proxy instance
                chatProxy.server.broadCastMessage($("#spnName").text(), $("#txtMsg").val());
                $('#txtMsg').val('').focus();
            })
        })
        //Callback function which the hub will call when it has finished processing,
        // is attached to the proxy
        chatProxy.client.receiveMessage = function (msgFrom, msg) {
            $('#divChat').append('<li><strong>' + msgFrom
                + '</strong>:&nbsp;&nbsp;' + msg + '</li>')
        };
    });
</script>

<div style="width: 50%; border: solid 1px Red; height: 40px">
    <h3 style="margin: 10px 0px 0px 10px">
        <span id="spnName"></span>
    </h3>
</div>
<div style="width: 50%; border: solid 1px Red; height: 100px">
    <div style="height: 70%" id="divChat"></div>
    <div style="border: dashed 1px Black;">
        <div style="float: left; width: 70%; padding: 4px">
            <input type="text" style="width: 100%" id="txtMsg" />
        </div>
        <div style="float: right; width: 19%; padding: 4px">
            <input type="button" id="btnSend" value="Send Message" style="width: 45px" />
        </div>
    </div>
</div>




<div class="container">
    <div class="row " style="padding-top: 40px;">
        <div class="col-md-8">
            <div class="panel panel-info">
                <div class="panel-heading">
                    RECENT CHAT HISTORY
                </div>
                <div class="panel-body">
                    <ul class="media-list">

                        <li class="media">

                            <div class="media-body">

                                <div class="media">
                                    <a class="pull-left" href="#">
                                        <img class="media-object img-circle " src="~/Content/defaultAvatar.png" width="50" height="50" />
                                    </a>
                                    <div class="media-body">
                                        Donec sit amet ligula enim. Duis vel condimentum massa.

                                        Donec sit amet ligula enim. Duis vel condimentum massa.Donec sit amet ligula enim.
                                        Duis vel condimentum massa.
                                        Donec sit amet ligula enim. Duis vel condimentum massa.
                                        <br />
                                        <small class="text-muted">Alex Deo | 23rd June at 5:00pm</small>
                                        <hr />
                                    </div>
                                </div>

                            </div>
                        </li>
                        <li class="media">

                            <div class="media-body">

                                <div class="media">
                                    <a class="pull-left" href="#">
                                        <img class="media-object img-circle " src="~/Content/defaultAvatar.png" width="50" height="50" />
                                    </a>
                                    <div class="media-body">
                                        Donec sit amet ligula enim. Duis vel condimentum massa.

                                        Donec sit amet ligula enim. Duis vel condimentum massa.Donec sit amet ligula enim.
                                        Duis vel condimentum massa.
                                        Donec sit amet ligula enim. Duis vel condimentum massa.
                                        <br />
                                        <small class="text-muted">Jhon Rexa | 23rd June at 5:00pm</small>
                                        <hr />
                                    </div>
                                </div>

                            </div>
                        </li>
                      
                    </ul>
                </div>
                <div class="panel-footer">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Enter Message" />
                        <span class="input-group-btn">
                            <button class="btn btn-info" type="button">SEND</button>
                        </span>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    ONLINE USERS
                </div>
                <div class="panel-body">
                    <ul class="media-list">

                        <li class="media">

                            <div class="media-body">

                                <div class="media">
                                    <a class="pull-left" href="#">
                                        <img class="media-object img-circle" style="max-height: 40px;" src="~/Content/defaultAvatar.png" width="30" height="30" />
                                    </a>
                                    <div class="media-body">
                                        <h5>Alex Deo | User </h5>

                                        <small class="text-muted">Active From 3 hours</small>
                                    </div>
                                </div>

                            </div>
                        </li>
                        <li class="media">

                            <div class="media-body">

                                <div class="media">
                                    <a class="pull-left" href="#">
                                        <img class="media-object img-circle" style="max-height: 40px;" src="assets/img/user.gif" />
                                    </a>
                                    <div class="media-body">
                                        <h5>Jhon Rexa | User </h5>

                                        <small class="text-muted">Active From 3 hours</small>
                                    </div>
                                </div>

                            </div>
                        </li>
                        <li class="media">
                            <div class="media-body">

                                <div class="media">
                                    <a class="pull-left" href="#">
                                        <img class="media-object img-circle" style="max-height: 40px;" src="assets/img/user.png" />
                                    </a>
                                    <div class="media-body">
                                        <h5>Alex Deo | User </h5>

                                        <small class="text-muted">Active From 3 hours</small>
                                    </div>
                                </div>

                            </div>
                        </li>
                        <li class="media">

                            <div class="media-body">

                                <div class="media">
                                    <a class="pull-left" href="#">
                                        <img class="media-object img-circle" style="max-height: 40px;" src="assets/img/user.gif" />
                                    </a>
                                    <div class="media-body">
                                        <h5>Jhon Rexa | User </h5>

                                        <small class="text-muted">Active From 3 hours</small>
                                    </div>
                                </div>

                            </div>
                        </li>
                    
                    </ul>
                </div>
            </div>

        </div>
    </div>
</div>